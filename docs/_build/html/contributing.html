

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributing to numistalib &mdash; numistalib 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=01f34227"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="Architecture" href="architecture.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            numistalib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_guide.html">CLI Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_api_guide.html">Python API Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced Usage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/cli.html">CLI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Information</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing to numistalib</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">ยง 1 Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">ยง 1.1 Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#development-setup">ยง 1.2 Development Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#code-standards">ยง 2 Code Standards</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mandatory-reading">ยง 2.1 Mandatory Reading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#key-rules">ยง 2.2 Key Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-quality-tools">ยง 2.3 Code Quality Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#development-workflow">ยง 3 Development Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#branch-strategy">ยง 3.1 Branch Strategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commit-messages">ยง 3.2 Commit Messages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#adding-features">ยง 4 Adding Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#new-service">ยง 4.1 New Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#new-cli-command">ยง 4.2 New CLI Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#new-model-fields">ยง 4.3 New Model Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testing">ยง 5 Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#test-structure">ยง 5.1 Test Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-tests">ยง 5.2 Writing Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-coverage">ยง 5.3 Test Coverage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-tests">ยง 5.4 Running Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">ยง 6 Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#docstrings">ยง 6.1 Docstrings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-documentation">ยง 6.2 User Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changelog">ยง 6.3 Changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pull-request-process">ยง 7 Pull Request Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#before-submitting">ยง 7.1 Before Submitting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pr-template">ยง 7.2 PR Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="#review-process">ยง 7.3 Review Process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#code-review-guidelines">ยง 8 Code Review Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#for-reviewers">ยง 8.1 For Reviewers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#for-contributors">ยง 8.2 For Contributors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#common-pitfalls">ยง 9 Common Pitfalls</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#avoid">ยง 9.1 Avoid</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remember">ยง 9.2 Remember</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-help">ยง 10 Getting Help</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#resources">ยง 10.1 Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#questions">ยง 10.2 Questions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#license">ยง 11 License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">numistalib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Contributing to numistalib</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/contributing.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="contributing-to-numistalib">
<h1>Contributing to numistalib<a class="headerlink" href="#contributing-to-numistalib" title="Link to this heading">๏</a></h1>
<p>Thank you for your interest in contributing! This guide will help you get started.</p>
<section id="getting-started">
<h2>ยง 1 Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading">๏</a></h2>
<section id="prerequisites">
<h3>ยง 1.1 Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">๏</a></h3>
<ul class="simple">
<li><p>Python 3.13 or higher</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uv</span></code> package manager</p></li>
<li><p>Git</p></li>
<li><p>A Numista API key (for testing)</p></li>
</ul>
</section>
<section id="development-setup">
<h3>ยง 1.2 Development Setup<a class="headerlink" href="#development-setup" title="Link to this heading">๏</a></h3>
<ol class="arabic simple" start="0">
<li><p>Fork the repository on GitHub</p></li>
<li><p>Clone your fork:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/YOUR_USERNAME/numista-lib.git
<span class="nb">cd</span><span class="w"> </span>numista-lib
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Install dependencies:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>sync
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Create <code class="docutils literal notranslate"><span class="pre">.env</span></code> file:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>.env.example<span class="w"> </span>.env
<span class="c1"># Add your API key to .env</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Verify installation:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>tests/<span class="w"> </span>-v
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="code-standards">
<h2>ยง 2 Code Standards<a class="headerlink" href="#code-standards" title="Link to this heading">๏</a></h2>
<section id="mandatory-reading">
<h3>ยง 2.1 Mandatory Reading<a class="headerlink" href="#mandatory-reading" title="Link to this heading">๏</a></h3>
<p><strong>Read <span class="xref myst">AGENTS.md</span> completely before contributing.</strong></p>
<p>This file contains authoritative coding standards including:</p>
<ul class="simple">
<li><p>Naming conventions</p></li>
<li><p>Type hints requirements</p></li>
<li><p>Complexity limits</p></li>
<li><p>Documentation requirements</p></li>
<li><p>Architecture patterns</p></li>
</ul>
</section>
<section id="key-rules">
<h3>ยง 2.2 Key Rules<a class="headerlink" href="#key-rules" title="Link to this heading">๏</a></h3>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">uv</span></code> for all tooling</p></li>
<li><p>Full type hints everywhere</p></li>
<li><p>NumPy-style docstrings for public APIs</p></li>
<li><p>Cognitive complexity โค 10</p></li>
<li><p>Cyclomatic complexity โค 8</p></li>
<li><p>No <code class="docutils literal notranslate"><span class="pre">print()</span></code> statements (use logging)</p></li>
<li><p>Always use exception chaining</p></li>
</ul>
</section>
<section id="code-quality-tools">
<h3>ยง 2.3 Code Quality Tools<a class="headerlink" href="#code-quality-tools" title="Link to this heading">๏</a></h3>
<p>Run before committing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lint and format</span>
uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>check<span class="w"> </span>--fix<span class="w"> </span>src/
uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>format<span class="w"> </span>src/

<span class="c1"># Type checking</span>
uv<span class="w"> </span>run<span class="w"> </span>mypy<span class="w"> </span>.
uv<span class="w"> </span>run<span class="w"> </span>pyright<span class="w"> </span>.

<span class="c1"># Complexity checks</span>
uv<span class="w"> </span>run<span class="w"> </span>radon<span class="w"> </span>cc<span class="w"> </span>src/numistalib/<span class="w"> </span>-a<span class="w"> </span>-nb
uv<span class="w"> </span>run<span class="w"> </span>xenon<span class="w"> </span>--max-absolute<span class="w"> </span>B<span class="w"> </span>src/numistalib/

<span class="c1"># Tests</span>
uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>tests/<span class="w"> </span>-v
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="development-workflow">
<h2>ยง 3 Development Workflow<a class="headerlink" href="#development-workflow" title="Link to this heading">๏</a></h2>
<section id="branch-strategy">
<h3>ยง 3.1 Branch Strategy<a class="headerlink" href="#branch-strategy" title="Link to this heading">๏</a></h3>
<ol class="arabic simple" start="0">
<li><p>Create a feature branch:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/your-feature-name
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Make your changes</p></li>
<li><p>Commit with descriptive messages:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add search by catalogue reference</span>

<span class="s2">- Implement catalogue parameter in search_types</span>
<span class="s2">- Add tests for catalogue filtering</span>
<span class="s2">- Update CLI with --catalogue flag&quot;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Push to your fork:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>feature/your-feature-name
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Create a pull request</p></li>
</ol>
</section>
<section id="commit-messages">
<h3>ยง 3.2 Commit Messages<a class="headerlink" href="#commit-messages" title="Link to this heading">๏</a></h3>
<p>Follow this format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">subject</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">footer</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Types:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">feat</span></code>: New feature</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fix</span></code>: Bug fix</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docs</span></code>: Documentation only</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">style</span></code>: Formatting, no code change</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refactor</span></code>: Code restructuring</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code>: Adding tests</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chore</span></code>: Maintenance</p></li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>feat: Add mint details endpoint

- Implement get_mint() in MintsService
- Add Mint model with full validation
- Create CLI command `numistalib mints get &lt;id&gt;`
- Add integration tests

Closes #42
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="adding-features">
<h2>ยง 4 Adding Features<a class="headerlink" href="#adding-features" title="Link to this heading">๏</a></h2>
<section id="new-service">
<h3>ยง 4.1 New Service<a class="headerlink" href="#new-service" title="Link to this heading">๏</a></h3>
<ol class="arabic simple" start="0">
<li><p><strong>Check Swagger spec</strong> in <code class="docutils literal notranslate"><span class="pre">docs/numista-swagger.yml</span></code></p></li>
<li><p><strong>Create models</strong> in <code class="docutils literal notranslate"><span class="pre">models/&lt;entity&gt;.py</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">numistalib.models.base.base_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="k">class</span><span class="w"> </span><span class="nc">YourModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Your model description.&quot;&quot;&quot;</span>
    
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Create service ABC</strong> in <code class="docutils literal notranslate"><span class="pre">services/&lt;tag&gt;/base.py</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">numistalib.services.base.service</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseService</span>

<span class="k">class</span><span class="w"> </span><span class="nc">YourServiceBase</span><span class="p">(</span><span class="n">BaseService</span><span class="p">,</span> <span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ABC for YourService.&quot;&quot;&quot;</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">YourModel</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get items.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Implement service</strong> in <code class="docutils literal notranslate"><span class="pre">services/&lt;tag&gt;/service.py</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">numistalib.services.</span><span class="o">&lt;</span><span class="n">tag</span><span class="o">&gt;.</span><span class="n">base</span> <span class="kn">import</span><span class="w"> </span><span class="nn">YourServiceBase</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">numistalib.models.</span><span class="o">&lt;</span><span class="n">entity</span><span class="o">&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">YourModel</span>

<span class="k">class</span><span class="w"> </span><span class="nc">YourService</span><span class="p">(</span><span class="n">YourServiceBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Service for &lt;tag&gt; endpoints.&quot;&quot;&quot;</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">get_items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">YourModel</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get items.&quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/your-endpoint&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_models</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s2">&quot;items&quot;</span><span class="p">])</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">to_models</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">YourModel</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert raw data to models.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">YourModel</span><span class="p">(</span><span class="o">**</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p><strong>Create CLI</strong> in <code class="docutils literal notranslate"><span class="pre">cli/&lt;tag&gt;.py</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">click</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rich.console</span><span class="w"> </span><span class="kn">import</span> <span class="n">Console</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">numistalib.services.</span><span class="o">&lt;</span><span class="n">tag</span><span class="o">&gt;.</span><span class="n">service</span> <span class="kn">import</span><span class="w"> </span><span class="nn">YourService</span>

<span class="n">console</span> <span class="o">=</span> <span class="n">Console</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">register_your_commands</span><span class="p">(</span><span class="n">cli</span><span class="p">:</span> <span class="n">click</span><span class="o">.</span><span class="n">Group</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register &lt;tag&gt; commands.&quot;&quot;&quot;</span>
    
    <span class="nd">@cli</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">your_command</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Your command description.&quot;&quot;&quot;</span>
        <span class="c1"># Implementation</span>
        <span class="k">pass</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p><strong>Register in main</strong> in <code class="docutils literal notranslate"><span class="pre">cli/main.py</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">numistalib.cli.</span><span class="o">&lt;</span><span class="n">tag</span><span class="o">&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">register_your_commands</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># ...</span>
    <span class="n">register_your_commands</span><span class="p">(</span><span class="n">cli</span><span class="p">)</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p><strong>Add tests</strong> in <code class="docutils literal notranslate"><span class="pre">tests/integration/test_cli_&lt;tag&gt;_read.py</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_your_command</span><span class="p">(</span><span class="n">runner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test your command.&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;your-command&quot;</span><span class="p">])</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">exit_code</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
</section>
<section id="new-cli-command">
<h3>ยง 4.2 New CLI Command<a class="headerlink" href="#new-cli-command" title="Link to this heading">๏</a></h3>
<p>Follow CLI patterns in existing commands:</p>
<ul class="simple">
<li><p>Use Click decorators</p></li>
<li><p>Accept settings via context or instantiate</p></li>
<li><p>Use Rich for output</p></li>
<li><p>Call model rendering methods</p></li>
<li><p>Handle errors gracefully</p></li>
<li><p>Provide short/long flags</p></li>
</ul>
</section>
<section id="new-model-fields">
<h3>ยง 4.3 New Model Fields<a class="headerlink" href="#new-model-fields" title="Link to this heading">๏</a></h3>
<ol class="arabic simple" start="0">
<li><p>Check Swagger spec for field types</p></li>
<li><p>Add field to Pydantic model with proper type</p></li>
<li><p>Add validation if needed</p></li>
<li><p>Update rendering methods if displayed</p></li>
<li><p>Add tests</p></li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="testing">
<h2>ยง 5 Testing<a class="headerlink" href="#testing" title="Link to this heading">๏</a></h2>
<section id="test-structure">
<h3>ยง 5.1 Test Structure<a class="headerlink" href="#test-structure" title="Link to this heading">๏</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>tests/
โโโ test_models.py              # Model validation tests
โโโ test_rich_renderables.py    # Rendering tests
โโโ integration/                # Integration tests
    โโโ conftest.py             # Fixtures
    โโโ test_cli_&lt;tag&gt;_read.py  # CLI integration tests
</pre></div>
</div>
</section>
<section id="writing-tests">
<h3>ยง 5.2 Writing Tests<a class="headerlink" href="#writing-tests" title="Link to this heading">๏</a></h3>
<p><strong>Unit Test:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_model_validation</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test model validates correctly.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Test&quot;</span><span class="p">}</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">YourModel</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">model</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="n">model</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Test&quot;</span>
</pre></div>
</div>
<p><strong>Integration Test:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_cli_command</span><span class="p">(</span><span class="n">runner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test CLI command.&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;your-command&quot;</span><span class="p">,</span> <span class="s2">&quot;--option&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">])</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">exit_code</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="s2">&quot;Expected output&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span>
</pre></div>
</div>
</section>
<section id="test-coverage">
<h3>ยง 5.3 Test Coverage<a class="headerlink" href="#test-coverage" title="Link to this heading">๏</a></h3>
<ul class="simple">
<li><p>Aim for &gt;80% coverage</p></li>
<li><p>Test happy paths and error cases</p></li>
<li><p>Mock network calls</p></li>
<li><p>Test both sync and async methods</p></li>
</ul>
</section>
<section id="running-tests">
<h3>ยง 5.4 Running Tests<a class="headerlink" href="#running-tests" title="Link to this heading">๏</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># All tests</span>
uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>tests/<span class="w"> </span>-v

<span class="c1"># Specific test file</span>
uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>tests/test_models.py<span class="w"> </span>-v

<span class="c1"># With coverage</span>
uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>tests/<span class="w"> </span>--cov<span class="o">=</span>numistalib<span class="w"> </span>--cov-report<span class="o">=</span>html
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="documentation">
<h2>ยง 6 Documentation<a class="headerlink" href="#documentation" title="Link to this heading">๏</a></h2>
<section id="docstrings">
<h3>ยง 6.1 Docstrings<a class="headerlink" href="#docstrings" title="Link to this heading">๏</a></h3>
<p><strong>Public APIs</strong> use NumPy style:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">search_types</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">issuer</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TypeBasic</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Search the catalogue for types.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    query : str, optional</span>
<span class="sd">        Search keywords</span>
<span class="sd">    issuer : str, optional</span>
<span class="sd">        Issuer code (e.g., &quot;france&quot;)</span>
<span class="sd">    count : int, default=50</span>
<span class="sd">        Results per page (max 50)</span>
<span class="sd">    </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list[TypeBasic]</span>
<span class="sd">        List of matching types</span>
<span class="sd">    </span>
<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    NumistaError</span>
<span class="sd">        If API request fails</span>
<span class="sd">    </span>
<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; service.search_types(query=&quot;dollar&quot;, count=10)</span>
<span class="sd">    [TypeBasic(...), ...]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><strong>Private methods</strong> use one-liners:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">_build_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build request parameters from kwargs.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
</section>
<section id="user-documentation">
<h3>ยง 6.2 User Documentation<a class="headerlink" href="#user-documentation" title="Link to this heading">๏</a></h3>
<p>Update relevant docs in <code class="docutils literal notranslate"><span class="pre">docs/</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cli_guide.md</span></code> for new CLI commands</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python_api_guide.md</span></code> for new service methods</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">api/*.rst</span></code> for API reference changes</p></li>
</ul>
</section>
<section id="changelog">
<h3>ยง 6.3 Changelog<a class="headerlink" href="#changelog" title="Link to this heading">๏</a></h3>
<p>Add entry to <code class="docutils literal notranslate"><span class="pre">docs/changelog.md</span></code>:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gu">## [Unreleased]</span>

<span class="gu">### Added</span>
<span class="k">-</span><span class="w"> </span>New <span class="sb">`get_mint()`</span> method in MintsService
<span class="k">-</span><span class="w"> </span>CLI command <span class="sb">`numistalib mints get &lt;id&gt;`</span>

<span class="gu">### Fixed</span>
<span class="k">-</span><span class="w"> </span>Cache key collision for identical queries

<span class="gu">### Changed</span>
<span class="k">-</span><span class="w"> </span>Rate limit default reduced to 40 requests/minute
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="pull-request-process">
<h2>ยง 7 Pull Request Process<a class="headerlink" href="#pull-request-process" title="Link to this heading">๏</a></h2>
<section id="before-submitting">
<h3>ยง 7.1 Before Submitting<a class="headerlink" href="#before-submitting" title="Link to this heading">๏</a></h3>
<ol class="arabic simple" start="0">
<li><p><strong>Run all checks:</strong></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>check<span class="w"> </span>--fix<span class="w"> </span>src/
uv<span class="w"> </span>run<span class="w"> </span>ruff<span class="w"> </span>format<span class="w"> </span>src/
uv<span class="w"> </span>run<span class="w"> </span>mypy<span class="w"> </span>.
uv<span class="w"> </span>run<span class="w"> </span>pyright<span class="w"> </span>.
uv<span class="w"> </span>run<span class="w"> </span>radon<span class="w"> </span>cc<span class="w"> </span>src/numistalib/<span class="w"> </span>-a<span class="w"> </span>-nb
uv<span class="w"> </span>run<span class="w"> </span>xenon<span class="w"> </span>--max-absolute<span class="w"> </span>B<span class="w"> </span>src/numistalib/
uv<span class="w"> </span>run<span class="w"> </span>pytest<span class="w"> </span>tests/<span class="w"> </span>-v
</pre></div>
</div>
<ol class="arabic simple">
<li><p><strong>Update documentation</strong></p></li>
<li><p><strong>Add tests</strong></p></li>
<li><p><strong>Update changelog</strong></p></li>
</ol>
</section>
<section id="pr-template">
<h3>ยง 7.2 PR Template<a class="headerlink" href="#pr-template" title="Link to this heading">๏</a></h3>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gu">## Description</span>

Brief description of changes.

<span class="gu">## Type of Change</span>

<span class="k">- [ ]</span> Bug fix
<span class="k">- [ ]</span> New feature
<span class="k">- [ ]</span> Breaking change
<span class="k">- [ ]</span> Documentation update

<span class="gu">## Checklist</span>

<span class="k">- [ ]</span> Code follows AGENTS.md standards
<span class="k">- [ ]</span> All tests pass
<span class="k">- [ ]</span> Docstrings added/updated
<span class="k">- [ ]</span> Documentation updated
<span class="k">- [ ]</span> Changelog updated
<span class="k">- [ ]</span> No increase in complexity metrics

<span class="gu">## Testing</span>

Describe testing performed.

<span class="gu">## Related Issues</span>

Closes <span class="ni">#XX</span>
</pre></div>
</div>
</section>
<section id="review-process">
<h3>ยง 7.3 Review Process<a class="headerlink" href="#review-process" title="Link to this heading">๏</a></h3>
<ol class="arabic simple" start="0">
<li><p>Automated checks run on PR</p></li>
<li><p>Maintainer reviews code</p></li>
<li><p>Feedback addressed</p></li>
<li><p>Approved and merged</p></li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="code-review-guidelines">
<h2>ยง 8 Code Review Guidelines<a class="headerlink" href="#code-review-guidelines" title="Link to this heading">๏</a></h2>
<section id="for-reviewers">
<h3>ยง 8.1 For Reviewers<a class="headerlink" href="#for-reviewers" title="Link to this heading">๏</a></h3>
<p>Check:</p>
<ul class="simple">
<li><p>AGENTS.md compliance</p></li>
<li><p>Test coverage</p></li>
<li><p>Documentation completeness</p></li>
<li><p>No complexity violations</p></li>
<li><p>Type safety</p></li>
<li><p>Error handling</p></li>
</ul>
</section>
<section id="for-contributors">
<h3>ยง 8.2 For Contributors<a class="headerlink" href="#for-contributors" title="Link to this heading">๏</a></h3>
<p>Expect feedback on:</p>
<ul class="simple">
<li><p>Code clarity</p></li>
<li><p>Architecture fit</p></li>
<li><p>Performance implications</p></li>
<li><p>API design</p></li>
<li><p>Testing thoroughness</p></li>
</ul>
<p>Be responsive to feedback and iterate.</p>
</section>
</section>
<hr class="docutils" />
<section id="common-pitfalls">
<h2>ยง 9 Common Pitfalls<a class="headerlink" href="#common-pitfalls" title="Link to this heading">๏</a></h2>
<section id="avoid">
<h3>ยง 9.1 Avoid<a class="headerlink" href="#avoid" title="Link to this heading">๏</a></h3>
<ul class="simple">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">print()</span></code> instead of logging</p></li>
<li><p>Missing type hints</p></li>
<li><p>Exceeding complexity limits</p></li>
<li><p>Ad-hoc client instantiation</p></li>
<li><p>Unvalidated API responses</p></li>
<li><p>Missing docstrings</p></li>
<li><p>Bare exceptions</p></li>
</ul>
</section>
<section id="remember">
<h3>ยง 9.2 Remember<a class="headerlink" href="#remember" title="Link to this heading">๏</a></h3>
<ul class="simple">
<li><p>Read AGENTS.md before coding</p></li>
<li><p>Run all quality checks before PR</p></li>
<li><p>Test both sync and async paths</p></li>
<li><p>Update documentation</p></li>
<li><p>Follow existing patterns</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="getting-help">
<h2>ยง 10 Getting Help<a class="headerlink" href="#getting-help" title="Link to this heading">๏</a></h2>
<section id="resources">
<h3>ยง 10.1 Resources<a class="headerlink" href="#resources" title="Link to this heading">๏</a></h3>
<ul class="simple">
<li><p><strong>AGENTS.md</strong>: Authoritative coding standards</p></li>
<li><p><strong>Architecture docs</strong>: <code class="docutils literal notranslate"><span class="pre">docs/architecture.md</span></code></p></li>
<li><p><strong>API docs</strong>: <code class="docutils literal notranslate"><span class="pre">docs/api/</span></code></p></li>
<li><p><strong>Examples</strong>: Existing code in <code class="docutils literal notranslate"><span class="pre">src/numistalib/</span></code></p></li>
</ul>
</section>
<section id="questions">
<h3>ยง 10.2 Questions<a class="headerlink" href="#questions" title="Link to this heading">๏</a></h3>
<ul class="simple">
<li><p>Open an issue for clarification</p></li>
<li><p>Check existing issues/PRs</p></li>
<li><p>Review similar implementations</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="license">
<h2>ยง 11 License<a class="headerlink" href="#license" title="Link to this heading">๏</a></h2>
<p>By contributing, you agree that your contributions will be licensed under the MIT License.</p>
<hr class="docutils" />
<p>Thank you for contributing to numistalib! ๐</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="architecture.html" class="btn btn-neutral float-left" title="Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="changelog.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Andy Wells.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>